:{$PORT} {
    root * /usr/share/caddy
    file_server
    try_files {path} /index.html

    # Proxy all API and WebSocket traffic
    reverse_proxy /api/v1/* {$BACKEND_URL} {
        # This ensures the connection doesn't drop during long AI tasks
        transport http {
            read_timeout 300s
        }
    }
}